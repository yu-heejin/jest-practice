## í…ŒìŠ¤íŠ¸ ì½”ë“œë€?

ìš°ë¦¬ê°€ ì‘ì„±í•œ ì½”ë“œì— ë¬¸ì œê°€ ì—†ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•´ ì‘ì„±í•˜ëŠ” ì½”ë“œ

**ê°œë°œìê°€ ì‘ì„±í•œ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ê³  ì˜ˆìƒëœ ê²°ê³¼ê°€ ì •ìƒì ìœ¼ë¡œ ë‚˜ì˜¤ëŠ”ì§€ í™•ì¸**í•˜ëŠ” ë° ì‚¬ìš©ëœë‹¤.

## í…ŒìŠ¤íŠ¸ ì½”ë“œÂ ì¢…ë¥˜

![image](https://github.com/yu-heejin/jest-practice/assets/96467030/6fa90dcf-aa2a-4b66-a9b8-e221899ba0ab)


### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸(UnitÂ Test)

* **ê°€ì¥ ì‘ì€ ê·œëª¨(í•¨ìˆ˜)ì˜ ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸**í•œë‹¤.

* **ì†Œí”„íŠ¸ì›¨ì–´ ê°œë³„ ì½”ë“œ ë‹¨ìœ„ë¥¼ í…ŒìŠ¤íŠ¸**í•˜ì—¬ ì˜¤ë¥˜ë¥¼ ë°œê²¬í•˜ê³  ì´ë¥¼ ìˆ˜ì •í•˜ì—¬ ì „ì²´ì ì¸ ì†Œí”„íŠ¸ì›¨ì–´ì˜ í’ˆì§ˆì„ í–¥ìƒ ì‹œí‚¤ëŠ” ê³¼ì •ì´ë‹¤.

### í†µí•© í…ŒìŠ¤íŠ¸(Integration Test)

* ì—¬ëŸ¬ê°€ì§€ ê¸°ëŠ¥ì„ í•©ì³¤ì„ ë•Œ ìƒê¸°ëŠ” ë¬¸ì œë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•œ í…ŒìŠ¤íŠ¸

* ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì—ì„œ **ê²€ì¦ëœ ê°œë³„ ëª¨ë“ˆë“¤ì„ ê²°í•©í•˜ì—¬ ê·¸ë“¤ì´ ì˜ˆìƒëŒ€ë¡œ ìƒí˜¸ì‘ìš©í•˜ê³  ìˆëŠ”ì§€ í™•ì¸**í•˜ëŠ” í…ŒìŠ¤íŠ¸

  * ì˜ˆë¥¼ ë“¤ì–´, ì‹ ê·œë¡œ ê°œë°œí•œ API ì„œë²„ ë‚´ì˜ DB í˜¸ì¶œ í•¨ìˆ˜ê°€ ë°ì´í„°ë² ì´ìŠ¤ì˜ ë°ì´í„°ë¥¼ ì˜ í˜¸ì¶œí•˜ê³  ìˆëŠ”ì§€ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê³¼ì •ì„ ì˜ë¯¸í•œë‹¤.

* ì¼ë°˜ì ìœ¼ë¡œ ëª¨ë“ˆ ê°„ ì¸í„°í˜ì´ìŠ¤ í…ŒìŠ¤íŠ¸, ì‹œìŠ¤í…œ ë ˆë²¨ í…ŒìŠ¤íŠ¸ ë“±ì˜ ë°©ë²•ìœ¼ë¡œ ìˆ˜í–‰ëœë‹¤.

### E2E í…ŒìŠ¤íŠ¸(End-to-End Test)

* ë°±ì—”ë“œë¶€í„° ì‹œì‘í•´ì„œ ì›¹ í˜ì´ì§€ê°€ ì›í•˜ëŠ”ëŒ€ë¡œ ë™ì‘í•˜ë©° ì›í•˜ëŠ” ë°ì´í„°ë¥¼ ì˜ ë³´ì—¬ì£¼ëŠ”ì§€ í™•ì¸í•˜ëŠ” í…ŒìŠ¤íŠ¸

* ì‹¤ì œ ì‚¬ìš©ìì˜ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ í…ŒìŠ¤íŠ¸í•¨ìœ¼ë¡œì¨ ì†Œí”„íŠ¸ì›¨ì–´ê°€ ì˜ë„í•œëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤.

## í…ŒìŠ¤íŠ¸ ì½”ë“œì˜Â ì¥ë‹¨ì 

### ì¥ì 

* í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í†µí•´ ë°œìƒ ê°€ëŠ¥ì„±ì´ ìˆëŠ” ì˜¤ë¥˜ë¥¼ ì‚¬ì „ì— ì°¾ì•„ëƒ„ìœ¼ë¡œì¨ ì„œë¹„ìŠ¤ì˜ í’ˆì§ˆì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆë‹¤.

* í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±ì„ í†µí•´ ë‹¤ë¥¸ ê°œë°œìê°€ ì‘ì„±í•œ ì½”ë“œì˜ ì˜ˆìƒ ë™ì‘ì„ í™•ì¸í•  ìˆ˜ ìˆì–´ ë¬¸ì„œí™”ë„ ê°€ëŠ¥í•˜ë‹¤.

* ì½”ë“œ ìˆ˜ì • ì´í›„ì—ë„ ê¸°ëŠ¥ì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ” ì§€ ê²€ì¦í•  ìˆ˜ ìˆë‹¤.

### ë‹¨ì 

* í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©´ì„œ ë°œìƒí•˜ëŠ” ê°œë°œ ì‹œê°„ ë° ìœ ì§€ë³´ìˆ˜ ë¹„ìš©ì´ ë°œìƒí•œë‹¤.

* ì„œë¹„ìŠ¤ì˜ ê¸°ëŠ¥ì´ ë³€ê²½ë˜ê±°ë‚˜ í™•ì¥ë  ë•Œë§ˆë‹¤ í…ŒìŠ¤íŠ¸ ì½”ë“œë„ í•¨ê»˜ ìˆ˜ì •í•´ì•¼í•œë‹¤.

* í…ŒìŠ¤íŠ¸ ì½”ë“œì— ë§ì€ ì‹œê°„ì„ íˆ¬ìí•˜ë‹¤ë³´ë©´ ì˜¤ë²„ ì—”ì§€ë‹ˆì–´ë§ì´ ë°œìƒí•˜ê¸°ë„ í•œë‹¤.

* ëŸ¬ë‹ ì»¤ë¸Œê°€ ë†’ì€ í¸ì´ë¼ í•™ìŠµí•˜ëŠ”ë° ì‹œê°„ì´ í•„ìš”í•˜ë‹¤.

## í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸° withÂ Jest

> Javaì—ì„œ JUnitì´ ìˆë‹¤ë©´, Javascriptì—ëŠ” jestê°€ ìˆë‹¤.
> 

### Jestë€?

* í˜ì´ìŠ¤ë¶ì—ì„œ ê°œë°œí•œ ì˜¤í”ˆ ì†ŒìŠ¤ ìë°”ìŠ¤í¬ë¦½íŠ¸ í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ì´ë‹¤.

* Jest ë“±ì¥ ì´ì „ì—ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œë¥¼ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•´ ì—¬ëŸ¬ í…ŒìŠ¤íŒ… ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¡°í•©í•´ì„œ ì‚¬ìš©í•´ì•¼í–ˆì§€ë§Œ, Jestì˜ ë“±ì¥ ì´í›„ Test Runner, Test Matcher, Test Mock í”„ë ˆì„ì›Œí¬ê¹Œì§€ ì œê³µí•´ì£¼ê¸° ë•Œë¬¸ì— í¸ë¦¬í•˜ê²Œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.

### Jest ì„¤ì¹˜í•˜ê¸°

```
npm i -D jest
```

- devDependenciesë¡œ ì„¤ì¹˜í•´ì•¼ í•œë‹¤.

### Jest ê¸°ë³¸Â ë¬¸ë²•

> íŒŒì¼ëª… ê¸°ë³¸ ì»¨ë²¤ì…˜ì€ `${testFileName}.test.js` *ì´ë‹¤.*
> 

```jsx
describe('3 ë”í•˜ê¸° 5ì˜ ê²°ê³¼ëŠ” ë¬´ì—‡ì¼ê¹Œ?', () => {
	test('3 ë”í•˜ê¸° 5ëŠ” 8ì…ë‹ˆë‹¤.', () => {
		expect(3 + 5).toEqual(8);
	}
}
```

* `describe`: í…ŒìŠ¤íŠ¸ ê·¸ë£¹ì„ ë¬¶ì–´ì£¼ëŠ” ì—­í• ì„ í•œë‹¤.

  - ë§Œì•½ test í•¨ìˆ˜ê°€ ìœ„ ì˜ˆì œì²˜ëŸ¼ í•˜ë‚˜ë¼ë©´ ìƒëµí•´ë„ ê´œì°®ë‹¤.
  - describe ì˜† ë¬¸ìì—´ì— ì–´ë–¤ ì½”ë“œë¥¼ í…ŒìŠ¤íŠ¸ í•˜ëŠ”ì§€ ì„¤ëª…ì„ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.

* `test`: í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•  ì½”ë“œì—ê²Œì„œ ê¸°ëŒ€í•˜ëŠ” ê°’ì„ ì…ë ¥í•œë‹¤.

  - test í•¨ìˆ˜ì—ë„ ì–´ë–¤ ì½”ë“œë¥¼ í…ŒìŠ¤íŠ¸ í•˜ëŠ”ì§€ ì„¤ëª…ì„ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.

* `expect`: ê²€ì¦í•´ì•¼ í•  ì½”ë“œë¥¼ í•´ë‹¹ í•¨ìˆ˜ì˜ ì¸ìˆ˜ë¡œ ì…ë ¥í•œë‹¤.

* `toEqual()`: Test Matcher ë¶€ë¶„ìœ¼ë¡œ. expectì˜ ê²°ê³¼ê°€ í•´ë‹¹ í•¨ìˆ˜ì˜ ì¸ìˆ˜ì™€ ê°™ì€ì§€ í™•ì¸í•œë‹¤.

* í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

  ![image](https://github.com/yu-heejin/jest-practice/assets/96467030/881bd7ae-73bc-4d75-9a90-9c6247fae44b)


### ìì£¼ ì‚¬ìš©í•˜ëŠ”Â Matcher

* `toEqual()`

  - ì¼ë°˜ì ìœ¼ë¡œ ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜
  - Test Matcher ë¶€ë¶„ìœ¼ë¡œ. ê²€ì¦ ëŒ€ìƒì˜ ê²°ê³¼ê°€ í•´ë‹¹ í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ì™€ ê°™ì€ì§€ í™•ì¸í•œë‹¤.

* `toBeTruthy()`, `toBeFalsy()`

  - `toBeTruthy()`ëŠ” ê²€ì¦ ëŒ€ìƒì˜ ê²°ê³¼ê°€ trueì´ë©´ í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•œë‹¤.
  - `toBeFalsy()`ëŠ” ë°˜ëŒ€ë¡œ ê²€ì¦ ëŒ€ìƒì˜ ê²°ê³¼ê°€ falseì´ë©´ í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•œë‹¤.

* `toHaveLength()`, `toContain()`

  - ë°°ì—´ì˜ ê¸¸ì´ë¥¼ ì²´í¬í•˜ê±°ë‚˜ íŠ¹ì • ì›ì†Œê°€ ì¡´ì¬í•˜ëŠ”ì§€ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ê²½ìš° ì‚¬ìš©í•œë‹¤.
  - `toHaveLength()`ëŠ” ë°°ì—´ì˜ ê¸¸ì´ë¥¼ ì²´í¬í•  ë•Œ ì“°ì¸ë‹¤.
  - `toContain()`ì€ íŠ¹ì • ì›ì†Œê°€ ë°°ì—´ì— ë“¤ì–´ ìˆëŠ”ì§€ë¥¼ í…ŒìŠ¤íŠ¸í•  ë•Œ ì‚¬ìš©í•œë‹¤.

* `toThrow()`

  - ì˜ˆì™¸ ë°œìƒ ì—¬ë¶€ë¥¼ í…ŒìŠ¤íŠ¸í•´ì•¼í•  ë•Œ ì‚¬ìš©í•œë‹¤.
  - ì¸ìì— ë¬¸ìì—´ì„ ë„˜ê¸°ë©´ ì˜ˆì™¸ ë©”ì„¸ì§€ë¥¼ ë¹„êµí•˜ê³ , ì •ê·œì‹ì„ ë„˜ê¸°ë©´ ì •ê·œì‹ì„ ì²´í¬í•œë‹¤.
  - `toThrow()`ë¥¼ ì‚¬ìš©í•  ë•Œ ì£¼ì˜í•´ì•¼í•  ì ì´ ìˆëŠ”ë°, `expect()` í•¨ìˆ˜ì— ë„˜ê¸°ëŠ” **ê²€ì¦ ëŒ€ìƒì„ í•¨ìˆ˜ë¡œ í•œë²ˆ ê°ì‹¸ì¤˜ì•¼í•œë‹¤.**
  - ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ì˜ˆì™¸ ë°œìƒ ì—¬ë¶€ë¥¼ ì²´í¬í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ **í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë„ì¤‘ ì •ë§ ê·¸ ì˜ˆì™¸ê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ê·¸ í…ŒìŠ¤íŠ¸ëŠ” í•­ìƒ ì‹¤íŒ¨í•˜ê²Œ ëœë‹¤.**

## Jest ì‹¤ìŠµÂ í•´ë³´ê¸°

### users ë°°ì—´ì—ì„œ â€˜Neoâ€™ë¼ëŠ” ë‹‰ë„¤ì„ì„ ê°€ì§„ ìœ ì €ì˜ ì¸ë±ìŠ¤ ìœ„ì¹˜ ë°˜í™˜ í…ŒìŠ¤íŠ¸Â ì‘ì„±

```jsx
// users ë°°ì—´ì—ì„œ 'Neo'ë¼ëŠ” ë‹‰ë„¤ì„ì„ ê°€ì§„ ìœ ì €ì˜ ì¸ë±ìŠ¤ ìœ„ì¹˜ ë°˜í™˜ í…ŒìŠ¤íŠ¸ ì‘ì„±
test('Neoë¼ëŠ” ì‚¬ëŒì€ ì¡´ì¬í•©ë‹ˆë‹¤.', () => {
    expect(findUser('Neo', users)).toEqual(0);
});
```

### users ë°°ì—´ì—ì„œ â€˜Fooâ€™ë¼ëŠ” ì‚¬ëŒì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ì§€Â í™•ì¸

```jsx
// users ë°°ì—´ì—ì„œ 'Foo'ë¼ëŠ” ì‚¬ëŒì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸
test('Fooë¼ëŠ” ì‚¬ëŒì€ ì—†ìŠµë‹ˆë‹¤.', () => {
 expect(findUserReturnBoolean('Foo', users)).toBeFalsy();
});
```

### (í…ŒìŠ¤íŠ¸ 2ê°œ) 0ìœ¼ë¡œ ë‚˜ëˆ„ì—ˆì„ ë•Œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ”ì§€ í™•ì¸, 4 ë‚˜ëˆ„ê¸° 2ì˜ ëª«ì´ 2ì¸ì§€Â í™•ì¸

```jsx
describe('ë‚˜ëˆ„ê¸° í•¨ìˆ˜ ì‹¤í–‰í•˜ê¸°', () => {
 test('4 ë‚˜ëˆ„ê¸° 2ëŠ” 2ì…ë‹ˆë‹¤.', () => {
  expect(calculateDivide(4, 2)).toEqual(2);
 });

 test('0ìœ¼ë¡œ ë‚˜ëˆ„ì—ˆì„ ë•Œ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.', () => {
  expect(() => calculateDivide(3, 0)).toThrow('[ERROR] ë‚˜ëˆ„ëŠ” ìˆ˜ëŠ” 0ì´ ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
 });
});
```

## jest í™˜ê²½ ì„¤ì • ì‹œÂ ì£¼ì˜ì‚¬í•­

jestëŠ” ES6 êµ¬ë¬¸ì„ ì§€ì›í•˜ì§€ ì•Šìœ¼ë©°, ì•„ë˜ì™€ ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.

```
Details:

.../jest-practice/__tests__/index.test.js:1
({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { findUser, findUserReturnBoolean, calculateDivide } from '../index';
```

ES6 ë¬¸ë²•ì„ ì„¤ì •í•˜ê¸° ìœ„í•´ ì•„ë˜ íŒ¨í‚¤ì§€ë¥¼ ì¶”ê°€ë¡œ ì„¤ì¹˜í•˜ê³ , babel.config.jsë¥¼ ì •ì˜í•´ì•¼í•œë‹¤.

```
"@babel/core": "^7.23.2",
"@babel/preset-env": "^7.23.2",
"babel-jest": "^29.7.0",
```

```
// babel.config.js
module.exports = {
    "presets": ["@babel/preset-env"]
}
```

```
// jest.config.js
module.exports = {
    moduleFileExtensions: ["js", "json", "jsx", "ts", "tsx", "json"],
    transform: {
        '^.+\\.(js|jsx)?$': 'babel-jest'
    },
    testEnvironment: 'node',
    moduleNameMapper: {
        '^@/(.*)$': '<rootDir>/$1'
    },
    testMatch: [
        '<rootDir>/**/*.test.(js|jsx|ts|tsx)', '<rootDir>/(tests/unit/**/*.spec.(js|jsx|ts|tsx)|**/__tests__/*.(js|jsx|ts|tsx))'
    ],
    transformIgnorePatterns: ['<rootDir>/node_modules/']
};
```

## ì°¸ê³  ìë£Œ

- https://www.daleseo.com/jest-basic/
- [https://inpa.tistory.com/entry/JEST-ğŸ“š-jest-ë¬¸ë²•-ì •ë¦¬](https://inpa.tistory.com/entry/JEST-%F0%9F%93%9A-jest-%EB%AC%B8%EB%B2%95-%EC%A0%95%EB%A6%AC)
- [https://velog.io/@kon6443/Node-JS-Jest-supertest-ê°œë…-ë°-CRUD-API-testing-ê°„ë‹¨-ì˜ˆì œ](https://velog.io/@kon6443/Node-JS-Jest-supertest-%EA%B0%9C%EB%85%90-%EB%B0%8F-CRUD-API-testing-%EA%B0%84%EB%8B%A8-%EC%98%88%EC%A0%9C)
- https://yozm.wishket.com/magazine/detail/1964/
- https://www.startupcode.kr/company/blog/archives/17
- https://seungjuitmemo.tistory.com/269
